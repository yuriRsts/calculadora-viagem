<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Calculadora de Viagem</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* { box-sizing: border-box; font-family: Arial, sans-serif; }

body {
  margin: 0;
  min-height: 100vh;
  background: #1e1e1e;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding-top: 60px;
}

.container {
  width: 100%;
  max-width: 420px;
  background: #2a2a2a;
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  color: #fff;
}

h2 {
  text-align: center;
  margin-bottom: 20px;
}

input, button {
  width: 100%;
  height: 46px;
  margin-bottom: 12px;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #444;
  background: #1f1f1f;
  color: #fff;
  font-size: 15px;
}

input:focus {
  outline: none;
  border-color: #4a90e2;
}

button {
  background: linear-gradient(135deg, #4a90e2, #357abd);
  border: none;
  cursor: pointer;
  font-weight: bold;
}

button:hover { opacity: 0.9; }

#resultado {
  margin-top: 12px;
  background: #1f1f1f;
  padding: 12px;
  border-radius: 8px;
  font-size: 14px;
}

#map {
  width: 100%;
  height: 220px;
  margin-top: 12px;
  border-radius: 10px;
  overflow: hidden;
  display: none;
}

/* Lista de sugest√µes */
.sugestoes {
  position: absolute;
  background: #1f1f1f;
  border: 1px solid #444;
  border-radius: 8px;
  z-index: 9999;
  display: none;
}

.sugestoes div {
  padding: 10px;
  cursor: pointer;
  color: #fff;
}

.sugestoes div:hover {
  background: #333;
}
</style>
</head>

<body>

<div class="container">
  <h2>Calculadora de Viagem</h2>

  <input id="origem" placeholder="Endere√ßo de origem">
  <input id="destino" placeholder="Endere√ßo de destino">
  <input id="kmLitro" type="number" placeholder="Km por litro">
  <input id="precoGasolina" type="number" step="0.01" placeholder="Pre√ßo da gasolina">

  <button onclick="calcular()">Calcular</button>

  <div id="resultado"></div>
  <div id="map"></div>
</div>

<script>
function calcular() {
  const origem = document.getElementById("origem").value;
  const destino = document.getElementById("destino").value;
  const kmLitro = parseFloat(document.getElementById("kmLitro").value);
  const preco = parseFloat(document.getElementById("precoGasolina").value);
  const pedagioInformado = parseFloat(document.getElementById("pedagio").value) || 0;
  const resultado = document.getElementById("resultado");

  if (!origem || !destino || !kmLitro || !preco) {
    resultado.innerHTML = "‚ö†Ô∏è Preencha todos os campos obrigat√≥rios.";
    return;
  }

  directionsService.route(
    {
      origin: origem,
      destination: destino,
      travelMode: google.maps.TravelMode.DRIVING
    },
    (response, status) => {
      if (status !== "OK") {
        resultado.innerHTML = "‚ùå N√£o foi poss√≠vel calcular a rota.";
        return;
      }

      const rota = response.routes[0].legs[0];

      const distanciaKm = rota.distance.value / 1000;
      const tempo = rota.duration.text;
      const consumo = distanciaKm / kmLitro;
      const custoCombustivel = consumo * preco;

      // üöß Detectar ped√°gio automaticamente
      let temPedagio = false;
      rota.steps.forEach(step => {
        if (step.maneuver === "toll") {
          temPedagio = true;
        }
      });

      const custoTotal = custoCombustivel + pedagioInformado;

      resultado.innerHTML = `
        ${temPedagio ? "üöß <b>Aten√ß√£o:</b> Esta rota possui ped√°gios<br><br>" : ""}
        üìç <b>Dist√¢ncia:</b> ${distanciaKm.toFixed(2)} km<br>
        ‚è± <b>Tempo estimado:</b> ${tempo}<br>
        ‚õΩ <b>Combust√≠vel:</b> R$ ${custoCombustivel.toFixed(2)}<br>
        üõ£ <b>Ped√°gios:</b> R$ ${pedagioInformado.toFixed(2)}<br>
        üí∞ <b>Total da viagem:</b> R$ ${custoTotal.toFixed(2)}
      `;

      // Mostrar mapa
      if (!map) {
        map = new google.maps.Map(document.getElementById("map"), {
          zoom: 7,
          center: rota.start_location
        });
        directionsRenderer.setMap(map);
      }

      document.getElementById("map").style.display = "block";
      directionsRenderer.setDirections(response);
    }
  );
}
</script>


<script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDiYWC1UozNM6xqegQg__CQvNA3FXgFbEA&libraries=places&callback=initAutocomplete"
  async defer>
</script>

</body>
</html>

